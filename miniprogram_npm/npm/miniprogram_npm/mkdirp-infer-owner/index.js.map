{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["const inferOwner = require('infer-owner')\nconst mkdirp = require('mkdirp')\nconst {promisify} = require('util')\nconst chownr = promisify(require('chownr'))\n\nconst platform = process.env.__TESTING_MKDIRP_INFER_OWNER_PLATFORM__\n  || process.platform\nconst isWindows = platform === 'win32'\nconst isRoot = process.getuid && process.getuid() === 0\nconst doChown = !isWindows && isRoot\n\nmodule.exports = !doChown ? (path, opts) => mkdirp(path, opts)\n  : (path, opts) => inferOwner(path).then(({uid, gid}) =>\n    mkdirp(path, opts).then(made =>\n      uid !== 0 || gid !== process.getgid()\n      ? chownr(made || path, uid, gid).then(() => made)\n      : made))\n\nmodule.exports.sync = !doChown ? (path, opts) => mkdirp.sync(path, opts)\n  : (path, opts) => {\n    const {uid, gid} = inferOwner.sync(path)\n    const made = mkdirp.sync(path)\n    if (uid !== 0 || gid !== process.getgid())\n      chownr.sync(made || path, uid, gid)\n    return made\n  }\n"]}